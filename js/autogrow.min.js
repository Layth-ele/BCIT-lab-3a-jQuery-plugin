!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"undefined"!=typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function d(a){return String(a).replace(/[&<>"'\/\ ]/g,function(a){return c[a]})}a.fn.autogrow=function(c){return c=a.extend({vertical:!0,horizontal:!1,characterSlop:0},c),this.filter("textarea,input").each(function(){var e=a(this),f="border-box"===e.css("box-sizing"),g=e.attr("maxHeight"),h="undefined"==typeof e.attr("minWidth")?0:e.attr("minWidth");"undefined"==typeof g&&(g=1e6);var i=a('<div class="autogrow-shadow"></div>').css({position:"absolute",top:-1e4,left:-1e4,fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),lineHeight:e.css("lineHeight"),paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight"),paddingTop:e.css("paddingTop"),paddingBottom:e.css("paddingBottom"),borderTop:e.css("borderTop"),borderBottom:e.css("borderBottom"),borderLeft:e.css("borderLeft"),borderRight:e.css("borderRight"),resize:"none"}).appendTo(document.body);i.html("a");var j=i.width();i.html("");var k=function(b){var k=function(a,b){for(var c=0,d="";c<b;c++)d+=a;return d};if("undefined"==typeof b&&(b=this.value),""===b&&a(this).attr("placeholder")&&(b=a(this).attr("placeholder")),b=c.vertical?b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){return k("&nbsp;",a.length-1)+" "}):d(b),i.html(b).css("width","auto"),c.horizontal){var l=c.characterSlop*j+2,m=Math.max(i.width()+l,h),n=c.maxWidth;n&&(m=Math.min(m,n)),a(this).css("width",m)}if(c.vertical){var o=a(this).width();f||(o=o-parseInt(e.css("paddingLeft"),10)-parseInt(e.css("paddingRight"),10)),i.css("width",o);var p=f?i.outerHeight():i.height();a(this).css("height","auto"),minHeight=f?e.outerHeight():e.height();var q=Math.min(Math.max(p,minHeight),g);a(this).css("height",q),a(this).css("overflow",q==g?"auto":"hidden")}};a(this).change(function(){return k.call(this),!0}).keyup(function(){return k.call(this),!0}).keypress(function(a){if(!a.ctrlKey&&!a.metaKey){var c=this.value,d=b(this),e=13===a.which?"\n":String.fromCharCode(a.which),f=c.slice(0,d.start)+e+c.slice(d.end);return k.call(this,f),!0}}).bind("update.autogrow",function(){k.apply(this)}).bind("remove.autogrow",function(){i.remove()}),k.apply(this)}),this};var b=function(a){var b={text:"",start:0,end:0};if(!a.value)return b;try{if(window.getSelection)b.start=a.selectionStart,b.end=a.selectionEnd,b.text=a.value.slice(b.start,b.end);else if(doc.selection){a.focus();var c=doc.selection.createRange(),d=doc.body.createTextRange();b.text=c.text;try{d.moveToElementText(a),d.setEndPoint("StartToStart",c)}catch(b){d=a.createTextRange(),d.setEndPoint("StartToStart",c)}b.start=a.value.length-d.text.length,b.end=b.start+c.text.length}}catch(a){}return b},c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"," ":"&nbsp;"}});
